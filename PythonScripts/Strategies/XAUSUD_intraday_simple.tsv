let's build the strategy in python for XAUUSD
1. open at the opening hours + shift    -       suggest
2. close at closing hours - shift       -       suggest           
Timeframe: 1-minute and 5-minute
MAs: 8 EMA, 21 SMA, 55 SMA - 
Session: 8:30 AM - 11 AM EST
Symbol: XAUUSD (Gold)
Stop: 10 pips ($10 in micro), Target: 20-30 pips. for the start set stop and Target in price absolute figures
volume 0.1, we worry about risk management later
Watch: DXY (USD Index)   - not for now, this is going to be next step

EMA table
ColumnOrder	ColumnName	DataType	    SizePrecision	Nullable	KeyType	    DefaultValue
1	ID	                bigint		                    No	        PK	
2	BarID	            bigint		                    No	        FK	
3	TickerJID	        int		                        No	        FK	
4	BarTime	            datetime	                    No      		
5	TimeFrameID	        int		                        No	        	
6	EMA_5_SHORT	        decimal	        18,8	        Yes     		
7	EMA_9_MACD_SIGNAL	decimal	        18,8	        Yes     		
8	EMA_12_MACD_FAST	decimal	        18,8	        Yes     		
9	EMA_20_SHORT	    decimal	        18,8	        Yes     		
10	EMA_26_MACD_SLOW	decimal	        18,8	        Yes     		
11	EMA_50_MEDIUM	    decimal	        18,8	        Yes     		
12	EMA_100_LONG	    decimal	        18,8	        Yes     		
13	EMA_200_LONG	    decimal	        18,8	        Yes     		
14	EMA_21_FIBO	        decimal	        18,8	        Yes     		
15	EMA_55_FIBO	        decimal	        18,8	        Yes     		
16	EMA_144_FIBO	    decimal	        18,8	        Yes     		
17	EMA_233_FIBO	    decimal	        18,8	        Yes     		
18	CreatedDate	        datetime		                Yes     		        (getdate())

MA table
ColumnOrder	ColumnName	DataType	    SizePrecision	Nullable	KeyType	    DefaultValue
1	ID	                bigint		                    No	        PK	
	BarID	            bigint		                    No	        FK	
	TickerJID	        int		                        No	        FK	
	BarTime	            datetime		                No	        	
	TimeFrameID	        int		                        No	        	
	MA5	                decimal	        18,8	        Yes		
	MA20	            decimal	        18,8	        Yes		
	MA30	            decimal	        18,8	        Yes		
	MA50	            decimal	        18,8	        Yes		
0	MA100	            decimal	        18,8	        Yes		
1	MA200	            decimal	        18,8	        Yes		
12	MA21_FIB	        decimal	        18,8	        Yes		
13	MA55_FIB	        decimal	        18,8	        Yes		
14	MA144_FIB	        decimal	        18,8	        Yes		
15	MA233_FIB	        decimal	        18,8	        Yes		
16	MA195_NYSE	        decimal	        18,8	        Yes		
17	MA390_NYSE	        decimal	        18,8	        Yes		
18	MA500	            decimal	        18,8	        Yes		
19	CreatedDate	        datetime		                Yes		                (getdate())

check the database:

1   For the indicators to be uptodate
select * from tms.indicatorsCount -- the <strategy>_rowsCount should be equal to BARS_rowsCount
BARS_rowsCount	EMA_rowsCount	MA_rowsCount
172219	        172219	        172219

2. if exists open position in XAUUSD
select * from trd.positions_v;
id	positionTicket	ticker	direction	openPrice	    currentPrice	openTime	            volume	margin	stopLoss	    takeProfit	    grossProfit	netProfit	total_P_L	positionLabel
1	186432961	XAUUSD	    Buy 	    4511.800000	    4635.120000	    2026-01-09 15:37:43.000	1.00	225.59	4262.260000	    4687.060000	    123.32	    121.01	    282.88	    87505B4D-B4A4-444D-B160-D76C5A9300BB
10	186593137	SpotBrent	Buy 	    63.599000	    66.149000	    2026-01-12 15:52:50.000	10.00	63.60	61.692000	    66.777000	    25.50	    25.66	    282.88	    01C1FAD1-A48F-45AE-9966-E9997BD7B254
12	186648034	XPTUSD	    Buy 	    2342.550000	    2416.020000	    2026-01-13 03:16:16.000	2.00	468.51	2249.690000	    2455.240000	    146.94	    144.70	    282.88	    56D4DA6C-CFF5-4546-ABE3-A83878A558FE
13	186569586	MSFT.US-24	Buy 	    472.110000	    467.800000	    2026-01-13 14:51:26.000	0.50	47.21	NULL	        487.810000	    -2.16	    -2.24	    282.88	    8ECCE416-5B92-4CEF-B7B0-C2190D57E2D0
14	186761656	BTCUSD	    Buy 	    95436.410000	95124.150000	2026-01-13 22:31:38.000	0.02	954.37	92936.230000	96377.910000	-6.25	    -6.25	    282.88	    79721D53-23DC-465A-8059-043256936A51

3. make decision. 
positionState direction signal action 

position 	direction	[strategy signal]	[Close position signal]	[Open position signal]   
no	        null	    buy	                no	                    buy
no	        null	    sell	            no	                    sell
no	        null	    drop	            no	                    no  
yes	        buy	        buy	                no	                    no
yes	        buy	        sell	            yes	                    sell
yes	        sell	    sell	            no	                    no
yes	        sell	    buy	                yes	                    buy
yes	        buy	        drop	            yes	                    no
yes	        sell	    drop	            yes	                    no

